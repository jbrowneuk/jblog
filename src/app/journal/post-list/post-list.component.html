<div class="container">
  <ng-container *ngIf="postData$ | async as postData; else journalLoadState">
    <ng-container *ngIf="postData.posts.length === 0">
      <ng-container *ngTemplateOutlet="noPosts"></ng-container>
    </ng-container>

    <jblog-post
      *ngFor="let post of postData.posts"
      [postData]="post"
      [titleLink]="'../../post/' + post.slug"
      [attr.data-post]="post.postId"
    ></jblog-post>

    <!-- posts  | arraySort: 'date' | arrayReverse -->

    <nav class="text-center secondary-text" data-pagination>
      <a
        *ngIf="postData.page > 1"
        [routerLink]="['../', postData.page - 1]"
        data-previous
      >
        <i class="fad fa-fw fa-chevron-left" aria-label="Previous page"></i>
      </a>
      <span data-page
        >Page {{ postData.page }} of {{ postData.totalPages }}</span
      >
      <a
        *ngIf="postData.page < postData.totalPages"
        [routerLink]="['../', postData.page + 1]"
        data-next
      >
        <i class="fad fa-fw fa-chevron-right" aria-label="Next page"></i>
      </a>
    </nav>
  </ng-container>
</div>

<ng-template #journalLoadState>
  <div
    *ngIf="loading$ | async; else noPosts"
    class="text-center"
    data-loading-posts
  >
    <jblog-post></jblog-post>>
  </div>
</ng-template>

<ng-template #noPosts>
  <div class="post" data-no-posts>
    <h2>No posts</h2>
  </div>
</ng-template>
