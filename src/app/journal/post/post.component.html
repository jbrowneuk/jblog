<article *ngIf="data" id="{{ data.postId }}" class="base-card">
  <header>
    <h1 data-test="post-title">
      <a [routerLink]="['/journal/post', data.slug]">{{ data.title }}</a>
    </h1>
  </header>

  <div class="outdated-content" *ngIf="isStalePost()" data-outdated-content>
    <i class="fad fa-fw fa-exclamation-triangle"></i>
    This post was posted {{ data.date * 1000 | relativeDate }} and is most
    likely no longer relevant.
  </div>

  <div class="content-area" data-test="post-content">
    <jblog-text>{{ data.content }}</jblog-text>
  </div>

  <footer>
    <ul class="tags-area">
      <li><i class="fad fa-tags" aria-hidden="true"></i></li>
      <li class="tag" *ngFor="let tag of data.tags">
        <a class="rounded" [routerLink]="['/journal/tag', tag]">{{ tag }}</a>
      </li>
      <li class="tagless" *ngIf="!hasTags()">Not tagged</li>
    </ul>

    <ng-container
      *ngTemplateOutlet="
        dateTemplate;
        context: {
          date: data.modified || data.date,
          icon: data.modified ? 'fa-calendar-edit' : 'fa-calendar'
        }
      "
    ></ng-container>
  </footer>
</article>

<ng-template #dateTemplate let-date="date" let-icon="icon">
  <span class="date" title="{{ date * 1000 | date: 'medium' }}" data-post-date>
    <i class="fad fa-fw {{ icon }}" aria-hidden="true"></i>
    {{ date * 1000 | relativeDate: { precise: isStalePost() } }}
  </span>
</ng-template>
